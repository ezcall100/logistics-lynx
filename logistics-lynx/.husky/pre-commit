#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

# Check for package.json changes without package-lock.json
if git diff --name-only --cached | grep -q '^package.json$' && \
   ! git diff --name-only --cached | grep -q '^package-lock.json$'; then
  echo "❌ package.json changed without package-lock.json — run 'npm install' and commit the lockfile."
  exit 1
fi

# Run lint-staged if available
if command -v npx >/dev/null 2>&1; then
  npx lint-staged
fi
