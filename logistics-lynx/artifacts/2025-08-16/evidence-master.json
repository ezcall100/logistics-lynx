{
  "timestamp": "2025-08-16T02:31:51.755Z",
  "date": "2025-08-16",
  "posture": "GREEN",
  "artifacts": {
    "featureFlags": {
      "timestamp": "2025-08-16T02:31:51.755Z",
      "data": "Command failed: psql \"$SUPABASE_DB_URL\" -c \"SELECT key, value, scope FROM feature_flags_v2 WHERE scope IN ('global', 'production') ORDER BY key;\"\n'psql' is not recognized as an internal or external command,\r\noperable program or batch file.\r\n",
      "status": "CAPTURED"
    },
    "sloSnapshot": {
      "timestamp": "2025-08-16T02:31:51.755Z",
      "healthz": {
        "ok": true,
        "ts": "2025-08-16T02:31:51.947Z"
      },
      "readyz": {
        "ready": true,
        "mode": "lenient"
      },
      "status": "CAPTURED"
    },
    "portalStatus": {
      "timestamp": "2025-08-16T02:31:51.755Z",
      "output": "\n> vite_react_shadcn_ts@0.0.0 check:portals\n> node scripts/check-portals.mjs\n\n",
      "status": "RED"
    },
    "outboxLag": {
      "timestamp": "2025-08-16T02:31:51.755Z",
      "query": "Command failed: psql \"$SUPABASE_DB_URL\" -c \"SELECT COUNT(*) as pending_count, MAX(created_at) as oldest_pending FROM outbox WHERE status = 'pending' AND created_at < NOW() - INTERVAL '5 minutes';\"\n'psql' is not recognized as an internal or external command,\r\noperable program or batch file.\r\n",
      "status": "CAPTURED"
    },
    "alertQueries": {
      "timestamp": "2025-08-16T02:31:51.755Z",
      "queries": {
        "highErrorRate": "SELECT COUNT(*) as error_count FROM logs WHERE level = 'error' AND created_at > NOW() - INTERVAL '1 hour';",
        "slowQueries": "SELECT COUNT(*) as slow_count FROM logs WHERE response_time > 5000 AND created_at > NOW() - INTERVAL '1 hour';",
        "dlqFailures": "SELECT COUNT(*) as dlq_count FROM dead_letter_queue WHERE created_at > NOW() - INTERVAL '1 hour';",
        "authFailures": "SELECT COUNT(*) as auth_failures FROM auth_logs WHERE success = false AND created_at > NOW() - INTERVAL '1 hour';"
      },
      "status": "CAPTURED"
    },
    "traceSample": {
      "timestamp": "2025-08-16T02:31:51.755Z",
      "sample": "Command failed: psql \"$SUPABASE_DB_URL\" -c \"SELECT trace_id, span_id, operation_name, duration_ms, created_at FROM traces WHERE created_at > NOW() - INTERVAL '1 hour' ORDER BY created_at DESC LIMIT 10;\"\n'psql' is not recognized as an internal or external command,\r\noperable program or batch file.\r\n",
      "status": "CAPTURED"
    },
    "systemHealth": {
      "timestamp": "2025-08-16T02:31:51.755Z",
      "smokeTest": "\n> vite_react_shadcn_ts@0.0.0 smoke:test\n> node scripts/prod-smoke-test.mjs\n\n🚀 Starting Production Smoke Test...\n   Host: localhost:8089\n   Timeout: 5000ms\n\n🏥 Testing /healthz endpoint...\n✅ /healthz: PASSED (32ms)\n\n🔍 Testing /readyz endpoint...\n✅ /readyz: PASSED (2ms)\n   Mode: lenient\n   Ready: true\n\n📊 Smoke Test Results:\n   Total Time: 37ms\n   /healthz: ✅ PASS\n   /readyz: ✅ PASS\n   Overall: ✅ PASS\n\n🎉 All smoke tests passed! System is ready for production.\n",
      "status": "GREEN"
    },
    "emergencyStatus": {
      "timestamp": "2025-08-16T02:31:51.755Z",
      "status": "\n> vite_react_shadcn_ts@0.0.0 emergency:status\n> node scripts/emergency-control.mjs status\n\n",
      "posture": "CAPTURED"
    },
    "auditDigest": {
      "timestamp": "2025-08-16T02:31:51.755Z",
      "date": "2025-08-16",
      "summary": {
        "totalArtifacts": 8,
        "successfulCaptures": 6,
        "failedCaptures": 1,
        "overallPosture": "GREEN"
      },
      "artifacts": [
        {
          "name": "featureFlags",
          "status": "CAPTURED",
          "file": "featureFlags.json"
        },
        {
          "name": "sloSnapshot",
          "status": "CAPTURED",
          "file": "sloSnapshot.json"
        },
        {
          "name": "portalStatus",
          "status": "RED",
          "file": "portalStatus.json"
        },
        {
          "name": "outboxLag",
          "status": "CAPTURED",
          "file": "outboxLag.json"
        },
        {
          "name": "alertQueries",
          "status": "CAPTURED",
          "file": "alertQueries.json"
        },
        {
          "name": "traceSample",
          "status": "CAPTURED",
          "file": "traceSample.json"
        },
        {
          "name": "systemHealth",
          "status": "GREEN",
          "file": "systemHealth.json"
        },
        {
          "name": "emergencyStatus",
          "status": "\n> vite_react_shadcn_ts@0.0.0 emergency:status\n> node scripts/emergency-control.mjs status\n\n",
          "file": "emergencyStatus.json"
        }
      ]
    }
  }
}